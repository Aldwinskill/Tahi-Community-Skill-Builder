@model List<SkillBuilder.Models.CourseProjectSubmission>

<style>
    /* === Declined Projects Section === */
    .user-declined-projects-section {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .user-declined-projects-header {
        font-size: 1.8rem;
        color: #DC3545; /* red highlight */
        margin-bottom: 1rem;
    }

    .user-declined-projects-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
    }

    .user-declined-projects-card {
        width: 200px;
        text-align: center;
        cursor: pointer;
    }

        .user-declined-projects-card img {
            width: 100%;
            height: 160px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
            transition: transform 0.2s ease;
            border: 3px solid #DC3545; /* red border for declined */
        }

            .user-declined-projects-card img:hover {
                transform: scale(1.05);
            }

    .user-declined-projects-course-name {
        margin-top: 0.5rem;
        font-weight: bold;
        color: #DC3545;
        font-size: 0.95rem;
    }

    .user-declined-projects-empty {
        padding: 2rem;
        text-align: center;
        color: #777;
        font-size: 1rem;
        line-height: 1.6;
        border: 1px dashed #ccc;
        border-radius: 10px;
        background-color: #fafafa;
    }

    /* Modal Styles */
    .declined-projects-modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
        justify-content: center;
        align-items: center;
    }

    .declined-projects-modal-content {
        background: #fff;
        border-radius: 10px;
        max-width: 700px;
        width: 90%;
        padding: 1.5rem;
        position: relative;
        animation: fadeIn 0.3s ease-in-out;
    }

    .declined-projects-close {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.5rem;
        font-weight: bold;
        color: #333;
        cursor: pointer;
    }

    .declined-projects-modal-body {
        text-align: center;
    }

    .declined-projects-image {
        max-width: 100%;
        max-height: 400px;
        margin-bottom: 1rem;
        border-radius: 10px;
    }

    .declined-projects-details {
        text-align: left;
    }

        .declined-projects-details h2 {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #DC3545;
        }

        .declined-projects-details p {
            margin: 0.2rem 0;
            font-size: 1rem;
            color: #444;
        }
</style>

<section class="user-declined-projects-section">
    <h2 class="user-declined-projects-header">Rejected Projects</h2>

    @if (Model != null && Model.Any())
    {
        <div class="user-declined-projects-grid">
            @foreach (var project in Model)
            {
                <div class="user-declined-projects-card"
                     data-image="@project.MediaUrl"
                     data-title="@project.Course?.Title"
                     data-caption="@project.Description">
                    <img src="@project.MediaUrl" alt="Declined project from @project.Course?.Title" />
                    <div class="user-declined-projects-course-name">@project.Course?.Title</div>
                </div>
            }
        </div>
    }
    else
    {
        <div class="user-declined-projects-empty">
            You have no rejected projects.<br />
            If a project is rejected, it will show up here.
        </div>
    }
</section>

<!-- Modal -->
<div id="declinedProjectsModal" class="declined-projects-modal">
    <div class="declined-projects-modal-content">
        <span class="declined-projects-close">&times;</span>
        <div class="declined-projects-modal-body">
            <img id="declinedProjectsImage" class="declined-projects-image" src="" alt="Project Image" />
            <div class="declined-projects-details">
                <h2 id="declinedProjectsTitle"></h2>
                <p id="declinedProjectsCaption"></p>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const modal = document.getElementById("declinedProjectsModal");
        const modalImage = document.getElementById("declinedProjectsImage");
        const modalTitle = document.getElementById("declinedProjectsTitle");
        const modalCaption = document.getElementById("declinedProjectsCaption");
        const closeBtn = document.querySelector(".declined-projects-close");

        document.querySelectorAll(".user-declined-projects-card").forEach(card => {
            card.addEventListener("click", () => {
                modalImage.src = card.dataset.image;
                modalTitle.textContent = card.dataset.title;
                modalCaption.textContent = card.dataset.caption;
                modal.style.display = "flex";
            });
        });

        closeBtn.addEventListener("click", () => modal.style.display = "none");
        modal.addEventListener("click", (e) => {
            if (e.target === modal) modal.style.display = "none";
        });
    });
</script>